<!DOCTYPE html>
<html
  lang="en"
  data-theme="dim">

<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title id="dynamicTitle">
MyBeats:  Stream & share your favorite music for free.
</title>

<meta name="description" content="Stream & share your favourite music for free." />
<meta name="keywords" content="music, player, web, audio, streaming, playlist, songs, albums, artists, videos, sharing, media, radio, pop, hiphop, country, dance, party, dubstep, alternative, rock, free, forever" />
<meta name="author" content="ClockBlocked" />
<meta name="theme-color" id="theme-color" content="#4A535D" />
<link rel="manifest" href="./system/manifest.json" />

<meta property="og:title" content="MyBeats™ - Stream & Share Music" />
<meta property="og:description" content="A sleek and modern web-based music player." />
<meta property="og:image" content="thumbnail.jpg" />
<meta property="og:url" content="https://clockblocked.github.io/Music" />
<meta property="og:type" content="website" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="MyBeats™ - Stream & Share Music" />
<meta name="twitter:description" content="A sleek and modern web-based music player." />
<meta name="twitter:image" content="thumbnail.jpg" />

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<link rel="apple-touch-icon" href="apple-touch-icon.png" />

<link rel="icon" href="favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />

<link rel="stylesheet" href="./styleSheets/overlays.css" />
<link rel="stylesheet" href="./styleSheets/extra.css" />
<link rel="stylesheet" href="./styleSheets/dynamicOverlays.css" />

<link rel="stylesheet" href="./styleSheets/main.css" />
<link rel="stylesheet" href="./styleSheets/pages/core.css" />
<link rel="stylesheet" href="./styleSheets/components/breadCrumbs.css" />
<link rel="stylesheet" href="./styleSheets/components/navbarPlayer.css" />
<link rel="stylesheet" href="./styleSheets/components/lists.css" />
<link rel="stylesheet" href="./styleSheets/components/playlists.css" />
<link rel="stylesheet" href="./styleSheets/pages/home.css" />
<link rel="stylesheet" href="./styleSheets/pages/artist.css" />
<link rel="stylesheet" href="./styleSheets/global/animatedly.css" />
<link rel="stylesheet" href="./styleSheets/global/fonts.css" />
<link rel="stylesheet" href="./styleSheets/global/svg.css" />

<!-- Unified responsive stylesheets -->
<link rel="stylesheet" href="./styleSheets/unified-player.css" />
<link rel="stylesheet" href="./styleSheets/responsive-layout.css" />
<link rel="stylesheet" href="./styleSheets/inline-styles.css" />
<link rel="stylesheet" href="./styleSheets/tailwind-conversion.css" />

<!-- Responsive stylesheets -->
<link 
    rel="stylesheet" 
    media="screen and (min-width: 768px) and (max-width: 1024px)" 
    href="./styleSheets/responsive/tablet.css"
>

<link 
    rel="stylesheet" 
    media="screen and (min-width: 1024px)" 
    href="./styleSheets/responsive/desktop.css"
>

<!-- L I B R A R I E S ------------->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/preline@2.0.3/dist/preline.min.css" />
  
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" />

<!-- A N A L Y T I C S ------------->
<script
  async src="https://www.googletagmanager.com/gtag/js?id=G-P0KCT8TSPW">
</script>

<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag("js", new Date());
  gtag("config", "G-P0KCT8TSPW");
</script>

<link rel="stylesheet" href="./styleSheets/pages/artist.css">


<style>
:root {
  --accent-primary: #6366fa;
  --accent-secondary: #9c6cf4;
  --card-radius: 18px;
  --shadow-md: 0 6px 32px rgba(54,56,87,.16);
  --card-border: 1px solid rgba(124,129,191,.11);
  --transition: .18s cubic-bezier(.38,.17,.54,1.04);
  --playlist-cover-size: 4.5rem;
  --playlist-detail-cover: 9rem;
  --playlist-row-hover: rgba(225, 222, 245, 0.08);
}

/* --- Playlists Modal Layout --- */
.playlist-modal__outer {
  width: 100%;
  margin: 0 auto;
  padding: 0;
}
.playlist-modal__header {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  margin-bottom: 2.8rem;
}
.playlist-modal__title {
  font-size: 2.6rem;
  font-weight: 700;
  margin-bottom: 1rem;
}
.playlist-modal__subtitle {
  font-size: 1.1rem;
  color: #868bba;
  font-weight: 500;
}
.playlist-modal__createbtn {
  appearance: none;
  background: var(--accent-primary);
  color: #fff;
  padding: 0.85rem 2.2rem;
  font-size: 1.08rem;
  border-radius: 999px;
  cursor: pointer;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 11px;
  box-shadow: var(--shadow-md);
  border: none;
  outline: none;
  z-index: 2;
  transition: background var(--transition), transform var(--transition);
}
.playlist-modal__createbtn:hover { background: var(--accent-secondary); transform: scale(1.04); }
.playlist-modal__grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
  gap: 2.2rem;
  width: 100%;
}

.playlist-card {
  border: var(--card-border);
  border-radius: var(--card-radius);
  box-shadow: var(--shadow-md);
  padding: 0;
  background: none !important;
  display: flex;
  flex-direction: column;
  min-height: 232px;
  transition: box-shadow var(--transition), transform var(--transition);
  cursor: pointer;
  position: relative;
  animation: fadeInUp .33s var(--transition) backwards;
}
@keyframes fadeInUp {
  from {opacity:0;transform:translateY(16px);}
  to {opacity:1;transform:translateY(0);}
}
.playlist-card:hover { box-shadow: 0 12px 38px rgba(54,56,87,.22); transform: scale(1.03);}
.playlist-card__cover {
  width: 100%;
  height: var(--playlist-cover-size);
  border-radius: 13px 13px 0 0;
  overflow: hidden;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}
.playlist-card__img {
  object-fit: cover;
  width: 100%;
  height: 100%;
  border-radius: 13px 13px 0 0;
  transition: filter var(--transition);
  filter: brightness(0.92) contrast(1.13);
}
.playlist-card__playbtn {
  position: absolute;
  bottom: .5rem;
  right: .8rem;
  padding: 0.6rem 0.7rem;
  border-radius: 50%;
  background: var(--accent-primary);
  color: #fff;
  font-size: 1.28rem;
  display: flex;
  align-items: center;
  box-shadow: 0 2px 12px rgba(61,70,191,.11);
  border: none;
  transition: background var(--transition), transform var(--transition);
  opacity: 0;
  pointer-events: none;
}
.playlist-card:hover .playlist-card__playbtn { opacity: 1; pointer-events: auto; transform: scale(1.12);}
.playlist-card__info {
  padding: 1.25rem 1.1rem 0.3rem 1.25rem;
  display: flex;
  flex-direction: column;
}
.playlist-card__name {
  font-size: 1.11rem;
  font-weight: 600;
  color: #223;
  text-overflow: ellipsis;
  overflow: hidden;
  margin-bottom: 0.3rem;
  white-space: nowrap;
  letter-spacing: .01em;
}
.playlist-card__songs {
  font-size: 0.98rem;
  color: #878cbe;
  margin-bottom: 0.41rem;
}
.playlist-card__actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 0.9rem;
  padding: 0.8rem 1.25rem 1.2rem 1.25rem;
}
.playlist-card__viewbtn,
.playlist-card__deletebtn {
  background: none;
  border: none;
  color: var(--accent-primary);
  font-size: 1rem;
  font-weight: 600;
  padding: 0.6rem 1.2rem;
  border-radius: 9px;
  cursor: pointer;
  transition: color var(--transition), background var(--transition), box-shadow var(--transition);
  box-shadow: none;
}
.playlist-card__viewbtn:hover { background: var(--accent-primary); color: #fff;}
.playlist-card__deletebtn:hover { background: #e03a4d; color: #fff;}

.playlist-detail__root {
  margin: 0 auto;
  max-width: 980px;
  width: 100%;
  padding: 0 1.6vw;
}
.playlist-detail__header {
  display: flex;
  gap: 2.7rem;
  align-items: flex-end;
  margin-bottom: 2.4rem;
}
.playlist-detail__cover {
  width: var(--playlist-detail-cover);
  height: var(--playlist-detail-cover);
  border-radius: 15px;
  overflow: hidden;
  background: none;
}
.playlist-detail__img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 16px;
  box-shadow: 0 1px 10px 0 rgba(62,70,191,0.09);
}
.playlist-detail__info {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}
.playlist-detail__label {
  font-size: 0.93rem;
  color: #868bba;
  font-weight: 500;
  margin-bottom: 0.13rem;
  letter-spacing: 0.12em;
}
.playlist-detail__title {
  font-size: 2.45rem;
  font-weight: 700;
  color: #131235;
  margin-bottom: 0.5rem;
}
.playlist-detail__details {
  font-size: 1.13rem;
  color: #a5aad1;
  margin-bottom: 1.6rem;
}
.playlist-detail__controls {
  display: flex;
  gap: 1.6rem;
}
.playlist-detail__playbtn,
.playlist-detail__editbtn,
.playlist-detail__deletebtn {
  background: var(--accent-primary);
  color: #fff;
  font-size: 1.03rem;
  font-weight: 600;
  padding: 0.86rem 2.8rem;
  border-radius: 94px;
  transition: background var(--transition), box-shadow var(--transition);
  box-shadow: var(--shadow-md);
  border: none;
  margin-right: .1rem;
  cursor: pointer;
}
.playlist-detail__editbtn { background: #878cbe;}
.playlist-detail__editbtn:hover { background: var(--accent-primary);}
.playlist-detail__deletebtn { background: #e03a4d;}
.playlist-detail__deletebtn:hover { background: #bb2744;}

.playlist-detail__playbtn[disabled] { opacity: 0.52; pointer-events: none;}
.playlist-detail__songs {
  margin-top: 2.77rem;
}
.playlist-detail__tablehead {
  display: grid;
  grid-template-columns: 44px 120px 180px 130px 70px 90px;
  color: #a5aad1;
  font-size: 1.08rem;
  font-weight: 600;
  border-bottom: 1.5px solid #e3e6fd;
  margin-bottom: 0.5rem;
  gap: .19rem;
  padding-left: .16rem;
}
.playlist-detail__album,
.playlist-detail__added { display: none; }
@media(min-width:768px) {
  .playlist-detail__album,
  .playlist-detail__added { display: inline-block; }
}

.playlist-song__row {
  display: grid;
  grid-template-columns: 44px 56px 1.6fr 1fr 1fr 90px;
  align-items: center;
  gap: .12rem;
  padding: 1.09rem .05rem 1.09rem .1rem;
  border-radius: 14px;
  transition: background var(--transition);
  cursor: pointer;
  margin-bottom: .12rem;
  box-shadow: 0 0.6px 12px 0 rgba(80,83,141,.053);
}
.playlist-song__row:hover { background: var(--playlist-row-hover);}
.playlist-song__idx { font-size: 1.08rem; color: #bbb;}
.playlist-song__playbtn {
  background: var(--accent-primary);
  color: #fff;
  border-radius: 50%;
  width: 2rem;
  height: 2rem;
  display: flex; align-items: center; justify-content: center;
  border: none;
  font-size: 1.23rem;
  box-shadow: 0 2px 18px rgba(54,56,87,.11);
  transition: background var(--transition), transform var(--transition);
}
.playlist-song__playbtn:hover { background: var(--accent-secondary); transform: scale(1.13); }
.playlist-song__title { display: flex; align-items: center; gap: .97rem; }
.playlist-song__thumbnail {
  width: 2rem;
  height: 2rem;
  object-fit: cover;
  border-radius: 8px;
  box-shadow: 0 1px 7px 0 rgba(45,60,191,0.09);
}
.playlist-song__songtext { font-weight: 600; font-size: 1.02rem; color: #232a55; }
.playlist-song__artist {
  font-size: 0.97rem;
  color: var(--accent-primary);
  cursor: pointer;
  text-decoration: underline;
  margin-left: .09rem;
  transition: color var(--transition);
}
.playlist-song__artist:hover { color: var(--accent-secondary);}
.playlist-song__album, .playlist-song__added, .playlist-song__duration {
  font-size: 0.99rem; color: #bbb; font-weight: 400;
}
.playlist-song__actions {
  display: flex;
  gap: 0.67rem;
  align-items: center;
}
.playlist-song__favoritebtn,
.playlist-song__queuebtn,
.playlist-song__removebtn {
  background: none;
  border: none;
  color: #868bba;
  padding: .32rem .36rem;
  border-radius: 7px;
  font-size: 1.18rem;
  cursor: pointer;
  transition: background .14s, color .19s;
}
.playlist-song__favoritebtn.active { color: #ef4444;}
.playlist-song__favoritebtn:hover { background: #f1f2fd; color: #ef4444;}
.playlist-song__queuebtn:hover { background: var(--accent-primary); color: #fff;}
.playlist-song__removebtn:hover { background: #e03a4d; color: #fff;}

.playlist-detail__empty {
  text-align: center;
  padding: 3.4rem 0 2.8rem 0;
  color: #222;
}
.playlist-detail__emptyicon {
  font-size: 4.8rem;
  margin-bottom: 1.2rem;
  color: #a8aff0;
}
.playlist-detail__emptymain {
  font-size: 1.37rem;
  font-weight: 700;
  margin-bottom: .48rem;
}
.playlist-detail__emptysub {
  color: #6871a6; font-size: 1.09rem; margin-bottom: 1.2rem; display:block;
}
.playlist-detail__browsebtn {
  appearance: none;
  background: var(--accent-primary);
  color: #fff;
  padding: 0.72rem 2.1rem;
  font-size: 1.02rem;
  border-radius: 999px;
  font-weight: 600;
  cursor: pointer;
  transition: background var(--transition), transform var(--transition);
}
.playlist-detail__browsebtn:hover { background: var(--accent-secondary); transform: scale(1.04);}








/* ===========================================
   UNIFIED MUSIC PLAYER CSS
   Works with existing design system - NO OVERRIDES
   =========================================== */

/* Base responsive utility classes */
.mobile-only {
    display: block;
}

.desktop-tablet-only {
    display: none;
}

@media (min-width: 768px) {
    .mobile-only {
        display: none;
    }
    
    .desktop-tablet-only {
        display: block;
    }
}

/* Unified Triggers for Desktop/Tablet - uses your existing variables */
.unified-triggers {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: var(--z-nav);
    display: flex;
    gap: 12px;
}

.unified-trigger {
    width: 48px;
    height: 48px;
    border-radius: var(--radius-lg);
    background: var(--background-500);
    border: 1px solid var(--border-200);
    color: var(--text-200);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all var(--transition-fast);
    box-shadow: var(--shadow-md);
}

.unified-trigger:hover {
    background: var(--background-600);
    border-color: var(--border-accent);
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    color: var(--text-100);
}

.unified-trigger:active {
    transform: translateY(0);
}

.unified-trigger svg {
    width: 20px;
    height: 20px;
}

/* Tablet/Desktop responsive adjustments for existing drawer */
@media (min-width: 768px) and (max-width: 1023px) {
    /* Tablet: Centered modal-style drawer */
    .drawer {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
    }
    
    .drawerScroller {
        height: auto;
        max-height: 80vh;
        width: 100%;
        max-width: 600px;
        overflow-y: auto;
        scroll-snap-type: none;
    }
    
    .drawerSlide {
        width: 100%;
        min-height: auto;
        height: auto;
        flex: none;
    }
    
    .drawerAnchors {
        display: none;
    }
    
    .drawerContent {
        min-height: auto;
        border-radius: var(--radius-xl);
        max-height: 80vh;
        overflow-y: auto;
        position: relative;
        translate: 0 0;
        transition: none;
    }
    
    .drawerCurtain {
        display: block;
    }
}

/* Desktop responsive adjustments */
@media (min-width: 1024px) {
    /* Desktop: Larger centered modal */
    .drawer {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 40px;
    }
    
    .drawerScroller {
        height: auto;
        max-height: 85vh;
        width: 100%;
        max-width: 700px;
        overflow-y: auto;
        scroll-snap-type: none;
    }
    
    .drawerSlide {
        width: 100%;
        min-height: auto;
        height: auto;
        flex: none;
    }
    
    .drawerAnchors {
        display: none;
    }
    
    .drawerContent {
        min-height: auto;
        border-radius: var(--radius-xl);
        max-height: 85vh;
        overflow-y: auto;
        position: relative;
        translate: 0 0;
        transition: none;
    }
    
    .drawerCurtain {
        display: block;
    }
    
    /* Desktop bento grid embedding support */
    .drawer.bento-embedded {
        position: relative;
        display: block;
        inset: unset;
        z-index: auto;
        padding: 0;
        pointer-events: auto;
        height: 100%;
    }
    
    .drawer.bento-embedded .drawerScroller {
        height: 100%;
        max-height: none;
        overflow: visible;
        scroll-snap-type: none;
    }
    
    .drawer.bento-embedded .drawerSlide {
        height: 100%;
        min-height: auto;
    }
    
    .drawer.bento-embedded .drawerContent {
        border-radius: var(--radius-lg);
        min-height: 100%;
        max-height: none;
        position: static;
        box-shadow: none;
        border: none;
    }
    
    .drawer.bento-embedded .drawerCurtain,
    .drawer.bento-embedded .mpNav {
        display: none;
    }
    
    .drawer.bento-embedded .drawerAnchors {
        display: none;
    }
}

/* Fix tablet popover behavior - prevent immediate closing */
@media (min-width: 768px) {
    .drawer::backdrop {
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: var(--blur-md);
    }
    
    .drawer:not(:popover-open) {
        display: none;
    }
    
    .drawer:popover-open {
        display: flex;
    }
    
    /* Ensure drawer content doesn't trigger backdrop clicks */
    .drawer .drawerContent {
        pointer-events: auto;
        position: relative;
        z-index: 10;
    }
    
    /* Make sure curtain only covers empty areas */
    .drawer .drawerCurtain {
        pointer-events: auto;
        z-index: 1;
    }
}

/* Animation fixes for tablet/desktop */
@media (min-width: 768px) {
    .drawer:popover-open {
        animation: fadeIn 0.3s ease;
    }
    
    .drawer.closing {
        animation: fadeOut 0.3s ease;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
    }
}

/* Bento card integration styles */
.bento-card.music-player-card {
    overflow: hidden;
    position: relative;
}

.bento-card.music-player-card .card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-md);
    border-bottom: 1px solid var(--border-200);
}

.bento-card.music-player-card .card-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-100);
    margin: 0;
}

.bento-card.music-player-card .card-actions {
    display: flex;
    gap: var(--space-sm);
}

.bento-card.music-player-card .expand-player-btn,
.bento-card.music-player-card .minimize-player-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--background-400);
    border: 1px solid var(--border-200);
    border-radius: var(--radius-sm);
    color: var(--text-300);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.bento-card.music-player-card .expand-player-btn:hover,
.bento-card.music-player-card .minimize-player-btn:hover {
    background: var(--background-500);
    color: var(--text-100);
    border-color: var(--border-accent);
}

/* Playing state indicator for unified triggers */
.unified-trigger.playing {
    background: var(--accent-primary);
    color: var(--text-on-accent);
    border-color: var(--accent-primary);
}

.unified-trigger.playing::after {
    content: '';
    position: absolute;
    top: -2px;
    right: -2px;
    width: 8px;
    height: 8px;
    background: var(--accent-success);
    border-radius: 50%;
    border: 2px solid var(--background-canvas);
}

/* Focus states using your existing variables */
.unified-trigger:focus-visible {
    outline: 2px solid var(--accent-primary);
    outline-offset: 2px;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .unified-trigger,
    .drawer,
    .drawerContent {
        transition: none;
        animation: none;
    }
}

/* High contrast support */
@media (prefers-contrast: high) {
    .unified-trigger {
        border-width: 2px;
    }
    
    .drawer .drawerContent {
        border-width: 2px;
    }
}


/* ===========================================
   RESPONSIVE LAYOUT CSS
   Works with existing navbar styles - NO OVERRIDES
   =========================================== */

/* Base Layout - respects existing pageWrapper */
#mainArea {
    transition: padding-top var(--transition-smooth);
}

/* Mobile Layout (Default) - preserves existing navbar styles */
@media (max-width: 767px) {
    /* Your existing navbar styles from navbarPlayer.css are preserved */
    
    /* Hide desktop/tablet triggers */
    .unified-triggers {
        display: none;
    }
    
    /* Dropdown menu positioning for mobile - respects existing variables */
    .dropdown-menu {
        position: fixed;
        bottom: calc(45px + 1rem + 16px); /* Based on your navbar height + bottom + padding */
        left: 4vw; /* Matches your navbar width calculation */
        right: 4vw;
        max-height: 70vh;
        transform: translateY(100%);
        transition: transform var(--transition-smooth);
        z-index: calc(var(--z-player) + 1);
    }
    
    .dropdown-menu.show {
        transform: translateY(0);
    }
}

/* Tablet Layout */
@media (min-width: 768px) and (max-width: 1023px) {
    /* Hide navbar on tablet */
    #navbar {
        display: none !important;
    }
    
    /* Show unified triggers */
    .unified-triggers {
        display: flex;
    }
    
    /* Adjust main area padding */
    #mainArea {
        padding-bottom: var(--space-xl);
    }
    
    /* Dropdown menu positioning for tablet */
    .dropdown-menu {
        position: fixed;
        top: 80px;
        right: 20px;
        left: auto;
        bottom: auto;
        width: 320px;
        max-height: calc(100vh - 120px);
        box-shadow: var(--shadow-xl);
        transform: translateY(-10px) scale(0.95);
        opacity: 0;
        transition: all var(--transition-smooth);
        pointer-events: none;
        z-index: calc(var(--z-player) + 1);
    }
    
    .dropdown-menu.show {
        transform: translateY(0) scale(1);
        opacity: 1;
        pointer-events: auto;
    }
}

/* Desktop Layout */
@media (min-width: 1024px) {
    /* Hide navbar on desktop */
    #navbar {
        display: none !important;
    }
    
    /* Show unified triggers */
    .unified-triggers {
        display: flex;
        top: var(--space-xl);
        right: var(--space-xl);
        gap: var(--space-md);
    }
    
    /* Adjust main area padding */
    #mainArea {
        padding-bottom: var(--space-2xl);
        padding-top: var(--space-md);
    }
    
    /* Dropdown menu positioning for desktop */
    .dropdown-menu {
        position: fixed;
        top: 80px;
        right: var(--space-xl);
        left: auto;
        bottom: auto;
        width: 360px;
        max-height: calc(100vh - 120px);
        box-shadow: var(--shadow-2xl);
        transform: translateY(-10px) scale(0.95);
        opacity: 0;
        transition: all var(--transition-smooth);
        pointer-events: none;
        z-index: calc(var(--z-player) + 1);
    }
    
    .dropdown-menu.show {
        transform: translateY(0) scale(1);
        opacity: 1;
        pointer-events: auto;
    }
    
    /* Desktop Bento Grid Layout - respects existing bento-grid class */
    .bento-grid {
        gap: var(--space-xl);
        padding: var(--space-xl);
    }
    
    /* Desktop music player bento integration */
    .drawer.bento-embedded .content {
        padding: var(--space-md);
    }
    
    .drawer.bento-embedded .tabsContainer {
        padding: var(--space-md) var(--space-md) 0;
    }
    
    .drawer.bento-embedded .cover {
        width: 160px;
        max-width: 160px;
        margin-bottom: var(--space-md);
    }
    
    .drawer.bento-embedded .info .title {
        font-size: 1.125rem;
        margin-bottom: var(--space-sm);
    }
    
    .drawer.bento-embedded .info .artist {
        font-size: 0.875rem;
        margin-bottom: var(--space-xs);
    }
    
    .drawer.bento-embedded .info .album {
        font-size: 0.75rem;
        margin-bottom: var(--space-lg);
    }
    
    .drawer.bento-embedded .controls {
        gap: var(--space-sm);
        margin-bottom: var(--space-md);
    }
    
    .drawer.bento-embedded .controls .btn {
        width: 36px;
        height: 36px;
    }
    
    .drawer.bento-embedded .controls .btn.primary {
        width: 48px;
        height: 48px;
    }
    
    .drawer.bento-embedded .actions {
        gap: var(--space-lg);
    }
    
    .drawer.bento-embedded .actions .action {
        width: 32px;
        height: 32px;
    }
}

/* Ultra-wide Desktop Layout */
@media (min-width: 1440px) {
    .unified-triggers {
        top: var(--space-2xl);
        right: var(--space-2xl);
        gap: 18px;
    }
    
    .unified-trigger {
        width: 52px;
        height: 52px;
    }
    
    .dropdown-menu {
        top: 96px;
        right: var(--space-2xl);
        width: 380px;
    }
}

/* Landscape Mobile Layout */
@media (max-width: 767px) and (orientation: landscape) {
    .dropdown-menu {
        bottom: calc(45px + 16px); /* Your navbar height + spacing */
        max-height: 60vh;
    }
}

/* Focus Management - respects existing variables */
.dropdown-menu:not(.show) {
    visibility: hidden;
}

.dropdown-menu.show {
    visibility: visible;
}

/* Accessibility Improvements */
.unified-trigger:focus-visible {
    outline: 3px solid var(--accent-primary);
    outline-offset: 2px;
}

/* Preserve existing scroll behavior */
@media (prefers-reduced-motion: reduce) {
    .dropdown-menu,
    .unified-trigger {
        transition: none;
        animation: none;
    }
}

/* CRITICAL FIX: Prevent popover from closing immediately on tablet/desktop */
@media (min-width: 768px) {
    /* Ensure the drawer stays open when clicked inside */
    .drawer:popover-open {
        position: fixed;
        display: flex;
        inset: 0;
        z-index: var(--z-player);
    }
    
    /* Prevent backdrop clicks from immediately closing */
    .drawer::backdrop {
        position: fixed;
        inset: 0;
        pointer-events: auto;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: var(--blur-md);
    }
}

/* Device-specific classes for JavaScript */
.device-mobile .desktop-tablet-only {
    display: none !important;
}

.device-tablet .mobile-only,
.device-desktop .mobile-only {
    display: none !important;
}

.device-tablet .desktop-tablet-only,
.device-desktop .desktop-tablet-only {
    display: flex !important;
}




/* ===========================================
   MODERN HOME COMPONENTS CSS
   Clean, modern styling for tracks, artists, playlists
   =========================================== */

/* Modern Track Items (Recently Played) */
.recent-tracks {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.modern-track-item {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
  background: var(--background-400);
  border: 1px solid var(--border-200);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
  overflow: hidden;
}

.modern-track-item::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.modern-track-item:hover {
  background: var(--background-500);
  border-color: var(--border-accent);
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.modern-track-item:hover::before {
  opacity: 0.05;
}

.track-artwork-container {
  position: relative;
  flex-shrink: 0;
}

.track-artwork {
  width: 56px;
  height: 56px;
  border-radius: var(--radius-md);
  object-fit: cover;
  box-shadow: var(--shadow-sm);
  transition: all var(--transition-fast);
}

.track-play-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.6);
  border-radius: var(--radius-md);
  opacity: 0;
  transition: all var(--transition-fast);
  backdrop-filter: blur(4px);
}

.modern-track-item:hover .track-play-overlay {
  opacity: 1;
}

.track-play-btn {
  width: 32px;
  height: 32px;
  background: var(--accent-primary);
  border: none;
  border-radius: 50%;
  color: var(--text-on-accent);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
  box-shadow: var(--shadow-md);
}

.track-play-btn:hover {
  background: var(--accent-primary-hover);
  transform: scale(1.1);
  box-shadow: var(--shadow-lg);
}

.track-content {
  flex: 1;
  min-width: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.track-main-info {
  flex: 1;
  min-width: 0;
}

.track-title-text {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text-100);
  margin-bottom: var(--space-xs);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 1.3;
}

.track-artist-text {
  font-size: 0.85rem;
  color: var(--text-300);
  cursor: pointer;
  transition: color var(--transition-fast);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.track-artist-text:hover {
  color: var(--accent-primary);
  text-decoration: underline;
}

.track-meta {
  margin-right: var(--space-md);
}

.track-duration {
  font-size: 0.8rem;
  color: var(--text-400);
  font-variant-numeric: tabular-nums;
}

.track-actions {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.modern-track-item:hover .track-actions {
  opacity: 1;
}

.track-action-btn {
  width: 36px;
  height: 36px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-300);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
}

.track-action-btn:hover {
  background: var(--background-600);
  color: var(--text-100);
  transform: scale(1.05);
}

.track-favorite-btn:hover {
  color: var(--accent-danger);
}

.track-favorite-btn.active {
  color: var(--accent-danger);
}

.track-favorite-btn.active svg {
  fill: currentColor;
}

/* Modern Playlist Cards */
.playlists-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.modern-playlist-card {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
  background: var(--background-400);
  border: 1px solid var(--border-200);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
  overflow: hidden;
}

.modern-playlist-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--accent-purple), var(--accent-pink));
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.modern-playlist-card:hover {
  background: var(--background-500);
  border-color: var(--border-accent);
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.modern-playlist-card:hover::before {
  opacity: 0.05;
}

.playlist-artwork-container {
  position: relative;
  flex-shrink: 0;
}

.playlist-icon-wrapper {
  width: 56px;
  height: 56px;
  background: linear-gradient(135deg, var(--accent-purple), var(--accent-pink));
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-on-accent);
  box-shadow: var(--shadow-sm);
  transition: all var(--transition-fast);
}

.playlist-play-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.6);
  border-radius: var(--radius-md);
  opacity: 0;
  transition: all var(--transition-fast);
  backdrop-filter: blur(4px);
}

.modern-playlist-card:hover .playlist-play-overlay {
  opacity: 1;
}

.playlist-play-btn {
  width: 32px;
  height: 32px;
  background: var(--accent-primary);
  border: none;
  border-radius: 50%;
  color: var(--text-on-accent);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
  box-shadow: var(--shadow-md);
}

.playlist-play-btn:hover {
  background: var(--accent-primary-hover);
  transform: scale(1.1);
  box-shadow: var(--shadow-lg);
}

.playlist-content {
  flex: 1;
  min-width: 0;
}

.playlist-main-info {
  flex: 1;
  min-width: 0;
}

.playlist-name-text {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text-100);
  margin-bottom: var(--space-xs);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 1.3;
}

.playlist-tracks-text {
  font-size: 0.85rem;
  color: var(--text-300);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.playlist-actions {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.modern-playlist-card:hover .playlist-actions {
  opacity: 1;
}

.playlist-action-btn {
  width: 36px;
  height: 36px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-300);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
}

.playlist-action-btn:hover {
  background: var(--background-600);
  color: var(--text-100);
  transform: scale(1.05);
}

/* Modern Artist Grid */
.modern-artist-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: var(--space-lg);
}

.modern-artist-card {
  background: var(--background-400);
  border: 1px solid var(--border-200);
  border-radius: var(--radius-xl);
  padding: var(--space-lg);
  cursor: pointer;
  transition: all var(--transition-base);
  position: relative;
  overflow: hidden;
  text-align: center;
}

.modern-artist-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  opacity: 0;
  transition: opacity var(--transition-base);
}

.modern-artist-card:hover {
  background: var(--background-500);
  border-color: var(--border-accent);
  transform: translateY(-8px);
  box-shadow: var(--shadow-xl);
}

.modern-artist-card:hover::before {
  opacity: 0.05;
}

.artist-artwork-container {
  position: relative;
  margin-bottom: var(--space-lg);
}

.artist-avatar-image {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  object-fit: cover;
  margin: 0 auto;
  display: block;
  box-shadow: var(--shadow-lg);
  transition: all var(--transition-base);
}

.modern-artist-card:hover .artist-avatar-image {
  transform: scale(1.05);
  box-shadow: var(--shadow-2xl);
}

.artist-gradient-overlay {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: linear-gradient(135deg, transparent 0%, var(--accent-primary) 100%);
  opacity: 0;
  transition: all var(--transition-base);
}

.modern-artist-card:hover .artist-gradient-overlay {
  opacity: 0.1;
}

.artist-play-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.6);
  border-radius: 50%;
  opacity: 0;
  transition: all var(--transition-base);
  backdrop-filter: blur(4px);
}

.modern-artist-card:hover .artist-play-overlay {
  opacity: 1;
}

.artist-play-btn {
  width: 48px;
  height: 48px;
  background: var(--accent-primary);
  border: none;
  border-radius: 50%;
  color: var(--text-on-accent);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
  box-shadow: var(--shadow-lg);
}

.artist-play-btn:hover {
  background: var(--accent-primary-hover);
  transform: scale(1.1);
  box-shadow: var(--shadow-xl);
}

.artist-content {
  margin-bottom: var(--space-md);
}

.artist-name-text {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--text-100);
  margin-bottom: var(--space-xs);
  line-height: 1.3;
}

.artist-label {
  font-size: 0.85rem;
  color: var(--text-300);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  font-weight: 500;
}

.artist-actions {
  display: flex;
  justify-content: center;
  opacity: 0;
  transition: opacity var(--transition-base);
}

.modern-artist-card:hover .artist-actions {
  opacity: 1;
}

.artist-action-btn {
  width: 36px;
  height: 36px;
  background: var(--background-600);
  border: 1px solid var(--border-200);
  border-radius: 50%;
  color: var(--text-300);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
}

.artist-action-btn:hover {
  background: var(--accent-primary);
  border-color: var(--accent-primary);
  color: var(--text-on-accent);
  transform: scale(1.1);
}

.artist-follow-btn.following {
  background: var(--accent-success);
  border-color: var(--accent-success);
  color: var(--text-on-accent);
}

/* Favorite Songs (same style as recent tracks but with heart active) */
.favorite-tracks {
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}

.modern-favorite-item {
  display: flex;
  align-items: center;
  gap: var(--space-md);
  padding: var(--space-md);
  background: var(--background-400);
  border: 1px solid var(--border-200);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition: all var(--transition-fast);
  position: relative;
  overflow: hidden;
}

.modern-favorite-item::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(135deg, var(--accent-danger), var(--accent-pink));
  opacity: 0.02;
  transition: opacity var(--transition-fast);
}

.modern-favorite-item:hover {
  background: var(--background-500);
  border-color: var(--border-accent);
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.modern-favorite-item:hover::before {
  opacity: 0.05;
}

.favorite-artwork-container {
  position: relative;
  flex-shrink: 0;
}

.favorite-artwork {
  width: 56px;
  height: 56px;
  border-radius: var(--radius-md);
  object-fit: cover;
  box-shadow: var(--shadow-sm);
  transition: all var(--transition-fast);
}

.favorite-play-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.6);
  border-radius: var(--radius-md);
  opacity: 0;
  transition: all var(--transition-fast);
  backdrop-filter: blur(4px);
}

.modern-favorite-item:hover .favorite-play-overlay {
  opacity: 1;
}

.favorite-play-btn {
  width: 32px;
  height: 32px;
  background: var(--accent-primary);
  border: none;
  border-radius: 50%;
  color: var(--text-on-accent);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
  box-shadow: var(--shadow-md);
}

.favorite-play-btn:hover {
  background: var(--accent-primary-hover);
  transform: scale(1.1);
  box-shadow: var(--shadow-lg);
}

.favorite-content {
  flex: 1;
  min-width: 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.favorite-main-info {
  flex: 1;
  min-width: 0;
}

.favorite-title-text {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text-100);
  margin-bottom: var(--space-xs);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  line-height: 1.3;
}

.favorite-artist-text {
  font-size: 0.85rem;
  color: var(--text-300);
  cursor: pointer;
  transition: color var(--transition-fast);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.favorite-artist-text:hover {
  color: var(--accent-primary);
  text-decoration: underline;
}

.favorite-meta {
  margin-right: var(--space-md);
}

.favorite-duration {
  font-size: 0.8rem;
  color: var(--text-400);
  font-variant-numeric: tabular-nums;
}

.favorite-actions {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  opacity: 0;
  transition: opacity var(--transition-fast);
}

.modern-favorite-item:hover .favorite-actions {
  opacity: 1;
}

.favorite-action-btn {
  width: 36px;
  height: 36px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--text-300);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--transition-fast);
}

.favorite-action-btn:hover {
  background: var(--background-600);
  color: var(--text-100);
  transform: scale(1.05);
}

.favorite-heart-btn {
  color: var(--accent-danger);
  opacity: 1;
}

.favorite-heart-btn:hover {
  color: var(--accent-danger-hover);
  background: rgba(239, 68, 68, 0.1);
}

.favorite-heart-btn.active svg {
  fill: currentColor;
}

/* Responsive Design */
@media (max-width: 768px) {
  .modern-artist-grid {
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: var(--space-md);
  }
  
  .modern-artist-card {
    padding: var(--space-md);
  }
  
  .artist-avatar-image {
    width: 80px;
    height: 80px;
  }
  
  .artist-play-btn {
    width: 36px;
    height: 36px;
  }
  
  .modern-track-item,
  .modern-playlist-card,
  .modern-favorite-item {
    padding: var(--space-sm) var(--space-md);
  }
  
  .track-artwork,
  .favorite-artwork {
    width: 48px;
    height: 48px;
  }
  
  .playlist-icon-wrapper {
    width: 48px;
    height: 48px;
  }
  
  .track-actions,
  .playlist-actions,
  .favorite-actions {
    opacity: 1; /* Always visible on mobile */
  }
}

@media (max-width: 480px) {
  .modern-artist-grid {
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: var(--space-sm);
  }
  
  .track-content,
  .favorite-content {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-xs);
  }
  
  .track-meta,
  .favorite-meta {
    margin-right: 0;
    align-self: flex-end;
  }
}

/* Animation delays preserved from original */
.modern-track-item:nth-child(1),
.modern-playlist-card:nth-child(1),
.modern-artist-card:nth-child(1),
.modern-favorite-item:nth-child(1) { animation-delay: 0.1s; }

.modern-track-item:nth-child(2),
.modern-playlist-card:nth-child(2),
.modern-artist-card:nth-child(2),
.modern-favorite-item:nth-child(2) { animation-delay: 0.2s; }

.modern-track-item:nth-child(3),
.modern-playlist-card:nth-child(3),
.modern-artist-card:nth-child(3),
.modern-favorite-item:nth-child(3) { animation-delay: 0.3s; }

.modern-track-item:nth-child(4),
.modern-playlist-card:nth-child(4),
.modern-artist-card:nth-child(4),
.modern-favorite-item:nth-child(4) { animation-delay: 0.4s; }

.modern-track-item:nth-child(5),
.modern-playlist-card:nth-child(5),
.modern-artist-card:nth-child(5),
.modern-favorite-item:nth-child(5) { animation-delay: 0.5s; }

.modern-track-item:nth-child(6),
.modern-playlist-card:nth-child(6),
.modern-artist-card:nth-child(6),
.modern-favorite-item:nth-child(6) { animation-delay: 0.6s; }
</style>
</head>
<body>

<!-- Main Page Wrapper ---------------------------------------->
<div id="pageWrapper" data-label="Outermost container for the whole page">

<!-- Toast container -->
<div id="toast-portal"></div>

<!-- Theme Toggle Component -->
<div class="theme-toggle-container">
    <div class="theme-trigger">
      <svg width="24" height="24" viewBox="0 0 24 24">
        <path fill="currentColor" d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121z"/>
      </svg>
    </div>
    <div class="theme-options">
      <button data-theme="light" aria-label="Light theme">
        <svg width="20" height="20" viewBox="0 0 24 24">
          <path fill="currentColor" d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121z"/>
        </svg>
      </button>
      <button data-theme="dim" aria-label="Dim theme">
        <svg width="20" height="20" viewBox="0 0 24 24">
          <path fill="currentColor" d="M9.822 2.238a9 9 0 0 0 11.94 11.94C20.768 18.654 16.775 22 12 22 6.477 22 2 17.523 2 12c0-4.775 3.346-8.768 7.822-9.762zm8.342.053L19 2.5v1l-.836.209a2 2 0 0 0-1.455 1.455L16.5 6h-1l-.209-.836a2 2 0 0 0-1.455-1.455L13 3.5v-1l.836-.209A2 2 0 0 0 15.291.836L15.5 0h1l.209.836a2 2 0 0 0 1.455 1.455zm5 5L24 7.5v1l-.836.209a2 2 0 0 0-1.455 1.455L21.5 11h-1l-.209-.836a2 2 0 0 0-1.455-1.455L18 8.5v-1l.836-.209a2 2 0 0 0 1.455-1.455L20.5 5h1l.209.836a2 2 0 0 0 1.455 1.455z"/>
        </svg>
      </button>
      <button data-theme="dark" aria-label="Dark theme">
        <svg width="20" height="20" viewBox="0 0 24 24">
          <path fill="currentColor" d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1-8.313-12.454z"/>
        </svg>
      </button>
    </div>
</div>

<!-- Unified Menu & Player Triggers for Tablet/Desktop -->
<div class="unified-triggers desktop-tablet-only">
    <button class="unified-trigger menu-trigger" id="unified-menu-trigger" title="Menu" data-label="Unified Menu Trigger">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" />
        </svg>
    </button>
    
    <button class="unified-trigger player-trigger" id="unified-player-trigger" title="Music Player" data-label="Unified Player Trigger">
        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.369 4.369 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z" />
        </svg>
    </button>
</div>

<!-- Navigation Bar (Mobile Only) -->
<nav id="navbar" class="glass-effect mobile-only">
    <div class="navbar-content" data-label="All elements within navbar container">

        <!--- L E F T --->
        <div class="navbar-left" data-label="Left container">
            <button class="menu-trigger" id="menu-trigger" title="Menu" data-label="DropUp Menu's Open & Close Button">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd" />
                </svg>
            </button>
        </div>

        <!--- C E N T E R --->
        <div class="navbar-center" id="now-playing-area" data-tooltip="Open Now Playing" data-tooltip-placement="top">
            <div class="nowPlaying" data-label="Opens the Music Player Drawer when clicked">

                <div class="albumArtwork flex items-center justify-center relative">
                    <svg class="w-6 h-6 text-white transition-opacity duration-500 ease-in-out" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.369 4.369 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z" />
                    </svg>
                    
                    <img src="" alt="Album Cover" class="absolute inset-0 w-full h-full object-cover opacity-0 transition-opacity duration-500 ease-in-out" />
                </div>

                <div class="songInfo">
                    <div class="songName truncate">No song playing</div>
                    <div class="artistName truncate">Select a song to get started</div>
                </div>

                <div class="play-indicator" id="play-indicator"></div>
            </div>
        </div>

        <div class="navbar-right">
            <div class="nav-controls">
                <button class="previous nav-control-btn" title="Previous Track">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M8.445 14.832A1 1 0 0010 14v-2.798l5.445 3.63A1 1 0 0017 14V6a1 1 0 00-1.555-.832L10 8.798V6a1 1 0 00-1.555-.832l-6 4a1 1 0 000 1.664l6 4z" />
                    </svg>
                </button>

                <button class="playPause nav-control-btn play-pause" title="Play/Pause">
                    <svg id="play-icon-navbar" class="play w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
                    </svg>
                    <svg id="pause-icon-navbar" class="pause w-6 h-6 hidden" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                    </svg>
                </button>

                <button class="next nav-control-btn" title="Next Track">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M4.555 5.168A1 1 0 003 6v8a1 1 0 001.555.832L10 11.202V14a1 1 0 001.555.832l6-4a1 1 0 000-1.664l-6-4A1 1 0 0010 6v2.798L4.555 5.168z" />
                    </svg>
                </button>
            </div>
        </div>
    </div>
</nav>

<!-- Dropdown Menu ----------------------------------------->
<div class="dropdown-menu" id="dropdown-menu">
    <div class="dropdown-header">
        <h3 class="dropdown-title">Music Library</h3>
        <button class="dropdown-close" id="dropdown-close">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
        </button>
    </div>

    <div class="dropdown-section">
        <h4 class="section-title">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" />
            </svg>
            Search
        </h4>

        <div class="dropdown-item" id="favorite-songs">
            <div class="dropdown-item-icon">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </div>
            <div class="dropdown-item-content">
                <div class="dropdown-item-title">
                    Find Songs, Albums, Artists</div>
                <div class="dropdown-item-subtitle">Your liked tracks</div>
            </div>
            <div class="dropdown-item-badge" id="favorite-songs-count">New!</div>
        </div>

        <!-- Search Trigger Button -->
        <button id="searchTrigger" class="search-trigger-btn flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 hover:bg-white/20 transition-all duration-300 backdrop-blur-sm">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
            <span class="text-sm">Search</span>
            <kbd class="hidden md:inline-block px-2 py-1 text-xs rounded bg-white/10">⌘K</kbd>
        </button>
    </div>

    <div class="dropdown-section">
        <h4 class="section-title">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" />
            </svg>
            Favorites
        </h4>

        <div class="dropdown-item" id="favorite-songs">
            <div class="dropdown-item-icon">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </div>
            <div class="dropdown-item-content">
                <div class="dropdown-item-title">Favorite Songs</div>
                <div class="dropdown-item-subtitle">Your liked tracks</div>
            </div>
            <div class="dropdown-item-badge" id="favorite-songs-count">0</div>
        </div>

        <div class="dropdown-item" id="favorite-artists">
            <div class="dropdown-item-icon">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 12a3 3 0 00-3-3H2a1 1 0 100 2h4a1 1 0 011 1v.5a1 1 0 102 0V12zm3-8a3 3 0 100 6 3 3 0 000-6zm-1 4a1 1 0 11-2 0 1 1 0 012 0z" />
                </svg>
            </div>
            <div class="dropdown-item-content">
                <div class="dropdown-item-title">Favorite Artists</div>
                <div class="dropdown-item-subtitle">Artists you follow</div>
            </div>
            <div class="dropdown-item-badge" id="favorite-artists-count">0</div>
        </div>
    </div>

    <div class="dropdown-section">
        <h4 class="section-title">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" />
            </svg>
            Library
        </h4>

        <div class="dropdown-item" id="recently-played">
            <div class="dropdown-item-icon">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd" />
                </svg>
            </div>
            <div class="dropdown-item-content">
                <div class="dropdown-item-title">Recent Plays</div>
                <div class="dropdown-item-subtitle">Recently played songs</div>
            </div>
            <div class="dropdown-item-badge" id="recent-count">0</div>
        </div>

        <div class="dropdown-item" id="queue-view">
            <div class="dropdown-item-icon">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" />
                </svg>
            </div>
            <div class="dropdown-item-content">
                <div class="dropdown-item-title">Up Next</div>
                <div class="dropdown-item-subtitle">Songs in queue</div>
            </div>
            <div class="dropdown-item-badge" id="queue-count">0</div>
        </div>
    </div>

    <div class="dropdown-section">
        <h4 class="section-title">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" />
            </svg>
            Playlists
        </h4>

        <div class="dropdown-item" id="create-playlist">
            <div class="dropdown-item-icon">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd" />
                </svg>
            </div>
            <div class="dropdown-item-content">
                <div class="dropdown-item-title">Create Playlist</div>
                <div class="dropdown-item-subtitle">Make a new playlist</div>
            </div>
        </div>

        <div id="playlists-list">
            <div class="empty-state" id="playlists-empty">
                <div class="empty-state-icon">
                    <svg class="w-full h-full" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" />
                    </svg>
                </div>
                <div class="empty-state-text">
                    No playlists yet.<br />
                    Create your first playlist!
                </div>
            </div>
        </div>
    </div>

    <div class="dropdown-section">
        <h4 class="section-title">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z" />
            </svg>
            Actions
        </h4>

        <div class="dropdown-item" id="shuffle-all">
            <div class="dropdown-item-icon">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd" />
                </svg>
            </div>
            <div class="dropdown-item-content">
                <div class="dropdown-item-title">Shuffle All</div>
                <div class="dropdown-item-subtitle">Play all songs randomly</div>
            </div>
        </div>
    </div>

    <div class="dropdown-section">
        <h4 class="section-title">
            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
            </svg>
            Settings
        </h4>

        <div class="dropdown-item" id="app-settings">
            <div class="dropdown-item-icon">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>
            </div>
            <div class="dropdown-item-content">
                <div class="dropdown-item-title">Preferences</div>
                <div class="dropdown-item-subtitle">App settings & options</div>
            </div>
        </div>

        <div class="dropdown-item" id="about-app">
            <div class="dropdown-item-icon">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                </svg>
            </div>
            <div class="dropdown-item-content">
                <div class="dropdown-item-title">About</div>
                <div class="dropdown-item-subtitle">Version & information</div>
            </div>
        </div>
    </div>
</div>

<style>
/* ====================================
   MUSIC PLAYER DRAWER - MODERN REVAMP
   ==================================== */

/* Main Drawer Container */
.drawer {
    position: fixed;
    inset: 0;
    background: transparent;
    border: none;
    padding: 0;
    margin: 0;
    z-index: 9999;
    overflow: hidden;
}

.drawer::backdrop {
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    animation: backdropFadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes backdropFadeIn {
    from {
        opacity: 0;
        backdrop-filter: blur(0px);
    }
    to {
        opacity: 1;
        backdrop-filter: blur(12px);
    }
}

.drawerScroller {
    width: 100%;
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
    scroll-snap-type: y mandatory;
    -webkit-overflow-scrolling: touch;
}

.drawerSlide {
    min-height: 100vh;
    scroll-snap-align: start;
    display: flex;
    flex-direction: column;
    position: relative;
}

.drawerAnchors {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 200vh;
    pointer-events: none;
    z-index: -1;
}

.drawerAnchor {
    height: 100vh;
    scroll-snap-align: start;
}

.drawerCurtain {
    position: fixed;
    inset: 0;
    background: transparent;
    border: none;
    cursor: default;
    z-index: 1;
}

/* Drawer Content */
.drawerContent {
    position: relative;
    width: 100%;
    max-width: 480px;
    margin: 0 auto;
    min-height: 100vh;
    background: linear-gradient(180deg, 
        rgba(20, 20, 30, 0.95) 0%, 
        rgba(15, 15, 25, 0.98) 50%,
        rgba(10, 10, 20, 1) 100%);
    border-radius: 24px 24px 0 0;
    box-shadow: 0 -8px 32px rgba(0, 0, 0, 0.5);
    z-index: 10;
    overflow: hidden;
    animation: drawerSlideUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes drawerSlideUp {
    from {
        transform: translateY(100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* Drag Handle */
.mpNav {
    display: flex;
    justify-content: center;
    padding: 12px 0;
    position: sticky;
    top: 0;
    z-index: 100;
    background: transparent;
}

.drawerDrag {
    width: 48px;
    height: 5px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 999px;
    border: none;
    cursor: grab;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
}

.drawerDrag:active {
    cursor: grabbing;
    transform: scaleX(1.2);
}

.drawerDrag:hover {
    background: rgba(255, 255, 255, 0.5);
    width: 64px;
}

.drawerDrag span {
    display: none;
}

/* ====================================
   FLOATING CLOSE BUTTON
   ==================================== */

.btn--close-floating {
    position: absolute;
    top: 24px;
    right: 24px;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 1000;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.btn--close-floating:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: rotate(90deg) scale(1.1);
}

.btn--close-floating svg {
    width: 20px;
    height: 20px;
    color: #fff;
}

/* ====================================
   ALBUM COVER SECTION WITH WAVY SEPARATOR
   ==================================== */

.albumCoverSection {
    position: relative;
    width: 100%;
    height: 50vh;
    min-height: 400px;
    overflow: hidden;
}

.albumCoverWrapper {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 60px 40px 80px;
}

.albumArtwork.cover {
    width: 100%;
    max-width: 320px;
    height: auto;
    aspect-ratio: 1;
    object-fit: cover;
    border-radius: 24px;
    box-shadow: 
        0 20px 60px rgba(0, 0, 0, 0.6),
        0 8px 24px rgba(0, 0, 0, 0.4);
    position: relative;
    z-index: 2;
    animation: albumFloat 6s ease-in-out infinite;
}

@keyframes albumFloat {
    0%, 100% {
        transform: translateY(0) scale(1);
    }
    50% {
        transform: translateY(-10px) scale(1.02);
    }
}

.coverGlow {
    position: absolute;
    inset: 0;
    background: radial-gradient(
        ellipse at center,
        rgba(139, 92, 246, 0.3) 0%,
        rgba(59, 130, 246, 0.2) 30%,
        transparent 70%
    );
    filter: blur(60px);
    opacity: 0.6;
    z-index: 1;
    animation: glowPulse 4s ease-in-out infinite;
}

@keyframes glowPulse {
    0%, 100% {
        opacity: 0.6;
        transform: scale(1);
    }
    50% {
        opacity: 0.8;
        transform: scale(1.1);
    }
}

/* Wavy Separator */
.wavySeparator {
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 100%;
    height: 80px;
    z-index: 3;
    color: rgba(15, 15, 25, 0.98);
    overflow: hidden;
}

.wavySeparator svg {
    width: 100%;
    height: 100%;
    display: block;
    animation: waveFlow 8s ease-in-out infinite;
}

@keyframes waveFlow {
    0%, 100% {
        transform: translateX(0) scaleY(1);
    }
    50% {
        transform: translateX(-25px) scaleY(1.1);
    }
}

/* ====================================
   MUSIC PLAYER BODY
   ==================================== */

.musicPlayer {
    position: relative;
    width: 100%;
    height: 100%;
}

.musicPlayer .body {
    padding: 0;
    position: relative;
}

/* ====================================
   MODERN TAB NAVIGATION
   ==================================== */

.modernTabsContainer {
    position: relative;
    width: 100%;
    padding: 0 24px;
    margin: 24px 0 32px;
}

.tabsWrapper {
    display: flex;
    gap: 8px;
    position: relative;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 16px;
    padding: 6px;
    backdrop-filter: blur(10px);
}

.modernTab {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    padding: 12px 8px;
    background: transparent;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    position: relative;
    z-index: 2;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    color: rgba(255, 255, 255, 0.5);
}

.modernTab:hover {
    color: rgba(255, 255, 255, 0.8);
    background: rgba(255, 255, 255, 0.05);
}

.modernTab.active {
    color: #fff;
}

.tabIcon {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.modernTab.active .tabIcon {
    transform: scale(1.15);
}

.modernTab svg {
    width: 100%;
    height: 100%;
}

.tabLabel {
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    white-space: nowrap;
}

.tabIndicator {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #8b5cf6, #3b82f6);
    border-radius: 999px;
    opacity: 0;
    transform: scaleX(0);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.modernTab.active .tabIndicator {
    opacity: 1;
    transform: scaleX(1);
}

.tabSlider {
    position: absolute;
    top: 6px;
    bottom: 6px;
    left: 6px;
    width: calc(33.333% - 8px);
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(59, 130, 246, 0.2));
    border-radius: 12px;
    transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 1;
    pointer-events: none;
}

.modernTab:nth-child(2).active ~ .tabSlider {
    transform: translateX(calc(100% + 8px));
}

.modernTab:nth-child(3).active ~ .tabSlider {
    transform: translateX(calc(200% + 16px));
}

/* ====================================
   TAB CONTENT AREA
   ==================================== */

.tabContentArea {
    position: relative;
    min-height: 400px;
}

.tabContent {
    display: none;
    animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.tabContent.active {
    display: block;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ====================================
   NOW PLAYING CONTENT
   ==================================== */

.playingContent {
    padding: 0 24px 40px;
    display: flex;
    flex-direction: column;
    gap: 32px;
}

/* Song Info Card */
.songInfoCard {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 20px;
    padding: 24px;
    display: flex;
    align-items: center;
    gap: 20px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
}

.songInfoCard:hover {
    background: rgba(255, 255, 255, 0.08);
    transform: translateY(-2px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

.songInfo {
    flex: 1;
    min-width: 0;
}

.songName {
    font-size: 20px;
    font-weight: 700;
    color: #fff;
    margin: 0 0 8px;
    line-height: 1.3;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.artistName {
    font-size: 15px;
    font-weight: 500;
    color: rgba(255, 255, 255, 0.7);
    margin: 0 0 4px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.albumName {
    font-size: 13px;
    font-weight: 400;
    color: rgba(255, 255, 255, 0.5);
    margin: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/* Inline Favorite Button */
.btn--favorite-inline {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    flex-shrink: 0;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.btn--favorite-inline:hover {
    background: rgba(239, 68, 68, 0.2);
    border-color: #ef4444;
    transform: scale(1.1);
}

.btn--favorite-inline.favorited {
    background: rgba(239, 68, 68, 0.3);
    border-color: #ef4444;
}

.btn--favorite-inline svg {
    width: 22px;
    height: 22px;
    color: rgba(255, 255, 255, 0.6);
    transition: all 0.3s ease;
}

.btn--favorite-inline:hover svg,
.btn--favorite-inline.favorited svg {
    color: #ef4444;
    fill: #ef4444;
}

.btn--favorite-inline.favorited svg {
    animation: heartBeat 0.6s ease;
}

@keyframes heartBeat {
    0%, 100% { transform: scale(1); }
    25% { transform: scale(1.3); }
    50% { transform: scale(0.9); }
    75% { transform: scale(1.1); }
}

/* ====================================
   ENHANCED PROGRESS SECTION
   ==================================== */

.progressSection {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.progressBar {
    position: relative;
    width: 100%;
    height: 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 999px;
    cursor: pointer;
    overflow: visible;
    transition: height 0.2s ease;
}

.progressBar:hover {
    height: 8px;
}

.progressBar:hover .progressThumb {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
}

.progressBuffer {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 999px;
    transition: width 0.3s ease;
}

.progressFill {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background: linear-gradient(90deg, #8b5cf6, #3b82f6);
    border-radius: 999px;
    transition: width 0.1s linear;
    position: relative;
}

.progressThumb {
    position: absolute;
    top: 50%;
    left: 100%;
    width: 16px;
    height: 16px;
    background: #fff;
    border-radius: 50%;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    transform: translate(-50%, -50%) scale(0);
    opacity: 0;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.progressBar.is-dragging .progressThumb,
.progressBar.is-hovering .progressThumb {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
}

.progressGlow {
    position: absolute;
    top: 50%;
    left: 0;
    width: 0%;
    height: 20px;
    background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.3), transparent);
    filter: blur(10px);
    transform: translateY(-50%);
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.progressBar:hover .progressGlow {
    opacity: 1;
    width: 100%;
}

.timeDisplay {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 4px;
}

.currentTime,
.totalTime {
    font-size: 12px;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.6);
    font-variant-numeric: tabular-nums;
}

/* ====================================
   PREMIUM PLAYBACK CONTROLS
   ==================================== */

.premiumControls {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    padding: 8px 0;
}

.controlBtn {
    width: 52px;
    height: 52px;
    border-radius: 50%;
    border: none;
    background: rgba(255, 255, 255, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.controlBtn::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 0%, transparent 70%);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.controlBtn:hover::before {
    opacity: 1;
}

.controlBtn:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: translateY(-2px);
}

.controlBtn:active {
    transform: translateY(0) scale(0.95);
}

.controlBtn svg {
    width: 24px;
    height: 24px;
    color: #fff;
    z-index: 1;
}

/* Secondary Controls */
.controlBtn--secondary {
    width: 48px;
    height: 48px;
}

.controlBtn--secondary svg {
    width: 22px;
    height: 22px;
}

/* Primary Play/Pause Button */
.controlBtn--primary {
    width: 72px;
    height: 72px;
    background: linear-gradient(135deg, #8b5cf6, #3b82f6);
    box-shadow: 
        0 8px 24px rgba(139, 92, 246, 0.4),
        0 4px 12px rgba(59, 130, 246, 0.3);
}

.controlBtn--primary:hover {
    background: linear-gradient(135deg, #9d6dff, #4c93ff);
    box-shadow: 
        0 12px 32px rgba(139, 92, 246, 0.5),
        0 6px 16px rgba(59, 130, 246, 0.4);
    transform: translateY(-4px) scale(1.05);
}

.controlBtn--primary svg {
    width: 32px;
    height: 32px;
}

.controlBtn--primary .pauseIcon {
    display: none;
}

.musicPlayer.isPlaying .controlBtn--primary .playIcon {
    display: none;
}

.musicPlayer.isPlaying .controlBtn--primary .pauseIcon {
    display: block;
}

/* Skip Time Buttons */
.controlBtn--rewind,
.controlBtn--forward {
    position: relative;
}

.skipLabel {
    position: absolute;
    bottom: 8px;
    font-size: 9px;
    font-weight: 700;
    color: #fff;
}

/* ====================================
   SECONDARY ACTIONS BAR
   ==================================== */

.actionsBar {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    padding: 16px 0 0;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.actionBtn {
    width: 44px;
    height: 44px;
    border-radius: 50%;
    background: transparent;
    border: 1px solid rgba(255, 255, 255, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.actionBtn:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
}

.actionBtn svg {
    width: 20px;
    height: 20px;
    color: rgba(255, 255, 255, 0.7);
}

.actionBtn:hover svg {
    color: #fff;
}

/* ====================================
   LIST VIEWS (QUEUE & RECENT)
   ==================================== */

.listHeader {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 24px 16px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.listTitle {
    font-size: 22px;
    font-weight: 700;
    color: #fff;
    margin: 0;
}

.listCount {
    font-size: 13px;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.5);
    background: rgba(255, 255, 255, 0.1);
    padding: 4px 12px;
    border-radius: 999px;
}

.modernList {
    list-style: none;
    padding: 0;
    margin: 0;
    max-height: 500px;
    overflow-y: auto;
    padding: 16px 24px 40px;
}

.modernList::-webkit-scrollbar {
    width: 6px;
}

.modernList::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 999px;
}

.modernList::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 999px;
}

.modernList::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* Empty State */
.empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    text-align: center;
}

.emptyIcon {
    width: 80px;
    height: 80px;
    margin-bottom: 20px;
    color: rgba(255, 255, 255, 0.2);
}

.emptyIcon svg {
    width: 100%;
    height: 100%;
}

.emptyText {
    font-size: 18px;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.7);
    margin-bottom: 8px;
}

.emptySubtext {
    font-size: 14px;
    color: rgba(255, 255, 255, 0.4);
}

/* ====================================
   RESPONSIVE DESIGN
   ==================================== */

@media (max-width: 480px) {
    .drawerContent {
        max-width: 100%;
        border-radius: 20px 20px 0 0;
    }

    .albumCoverWrapper {
        padding: 40px 24px 60px;
    }

    .albumArtwork.cover {
        max-width: 280px;
    }

    .songInfoCard {
        padding: 20px;
    }

    .songName {
        font-size: 18px;
    }

    .artistName {
        font-size: 14px;
    }

    .premiumControls {
        gap: 8px;
    }

    .controlBtn--primary {
        width: 64px;
        height: 64px;
    }

    .controlBtn--secondary {
        width: 44px;
        height: 44px;
    }

    .tabLabel {
        font-size: 10px;
    }
}

@media (min-width: 768px) {
    .drawerContent {
        margin-top: 5vh;
        min-height: 95vh;
        border-radius: 24px;
    }

    .albumCoverSection {
        height: 55vh;
        min-height: 450px;
    }

    .albumArtwork.cover {
        max-width: 360px;
    }
}

/* ====================================
   ANIMATIONS & TRANSITIONS
   ==================================== */

@keyframes slideInFromBottom {
    from {
        transform: translateY(100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes shimmer {
    0% {
        background-position: -1000px 0;
    }
    100% {
        background-position: 1000px 0;
    }
}

/* Loading State */
.musicPlayer.loading .albumArtwork.cover {
    animation: shimmer 2s infinite linear;
    background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0.05) 0%,
        rgba(255, 255, 255, 0.1) 50%,
        rgba(255, 255, 255, 0.05) 100%
    );
    background-size: 1000px 100%;
}

/* Accessibility */
.controlBtn:focus,
.actionBtn:focus,
.modernTab:focus {
    outline: 2px solid rgba(139, 92, 246, 0.6);
    outline-offset: 2px;
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}
</style>
<aside class="drawer" popover="auto" id="drawer">
    <div class="drawerScroller">
        <div class="drawerSlide">
            <div class="drawerAnchors">
                <div class="drawerAnchor"></div>
                <div class="drawerAnchor"></div>
            </div>

            <button popovertargetaction="hide" popovertarget="drawer" class="drawerCurtain" tabindex="-1"></button>

            <div class="drawerContent">
                <div class="mpNav">
                    <button autofocus class="drawerDrag" popovertargetaction="hide" popovertarget="drawer">
                        <span></span>
                    </button>
                </div>

                <div class="content">
                    <div class="musicPlayer" id="musicPlayer">
                        <!-- Close Button - Floating Top Right -->
                        <button class="btn btn--close-floating use-site-colors" id="closeBtn">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </button>

                        <!-- Immersive Album Cover Section -->
                        <div class="albumCoverSection">
                            <div class="albumCoverWrapper">
                                <img id="cover" src="" alt="Album Cover" class="albumArtwork cover" />
                                <div class="coverGlow"></div>
                            </div>
                            
                            <!-- Wavy Separator SVG -->
                            <div class="wavySeparator">
                                <svg viewBox="0 0 1200 120" preserveAspectRatio="none">
                                    <path d="M0,0 C150,80 350,0 600,50 C850,100 1050,20 1200,80 L1200,120 L0,120 Z" fill="currentColor"></path>
                                </svg>
                            </div>
                        </div>

                        <!-- Content Body -->
                        <div class="body">
                            <!-- Modern Tab Navigation -->
                            <div class="modernTabsContainer">
                                <div class="tabsWrapper">
                                    <button class="modernTab active" data-tab="playing">
                                        <span class="tabIcon">
                                            <svg viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"/>
                                            </svg>
                                        </span>
                                        <span class="tabLabel">Now Playing</span>
                                        <div class="tabIndicator"></div>
                                    </button>
                                    <button class="modernTab" data-tab="recent">
                                        <span class="tabIcon">
                                            <svg viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>
                                            </svg>
                                        </span>
                                        <span class="tabLabel">Recent</span>
                                        <div class="tabIndicator"></div>
                                    </button>
                                    <button class="modernTab" data-tab="queue">
                                        <span class="tabIcon">
                                            <svg viewBox="0 0 24 24" fill="currentColor">
                                                <path d="M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"/>
                                            </svg>
                                        </span>
                                        <span class="tabLabel">Up Next</span>
                                        <div class="tabIndicator"></div>
                                    </button>
                                </div>
                                <div class="tabSlider"></div>
                            </div>

                            <!-- Tab Content -->
                            <div class="tabContentArea">
                                <!-- Now Playing -->
                                <div class="tabContent active" data-tab="playing">
                                    <div class="playingContent">
                                        <!-- Song Info Card -->
                                        <div class="songInfoCard">
                                            <div class="songInfo">
                                                <h4 id="title" class="songName title"></h4>
                                                <p id="artist" class="artistName artist"></p>
                                                <p id="album" class="albumName album"></p>
                                            </div>
                                            
                                            <!-- Favorite Button in Info Card -->
                                            <button class="btn btn--favorite-inline use-site-colors" id="favoriteBtn" title="Add to Favorites">
                                                <svg viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2">
                                                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                                                </svg>
                                            </button>
                                        </div>

                                        <!-- Enhanced Progress Section -->
                                        <div class="progressSection" id="musicProgress">
                                            <div class="progressBar" id="progressBar" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Seek">
                                                <div class="progressBuffer" id="progressBuffer"></div>
                                                <div class="progressFill" id="progressFill">
                                                    <div class="progressThumb" id="progressThumb"></div>
                                                </div>
                                                <div class="progressGlow"></div>
                                            </div>
                                            
                                            <div class="timeDisplay">
                                                <span id="currentTime" class="currentTime">0:00</span>
                                                <span id="totalTime" class="totalTime">0:00</span>
                                            </div>
                                        </div>

                                        <!-- Premium Playback Controls -->
                                        <div class="premiumControls">
                                            <button class="controlBtn controlBtn--secondary" id="prevBtn" title="Previous">
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
                                                </svg>
                                            </button>

                                            <button class="controlBtn controlBtn--rewind" id="rewindBtn" title="Rewind 10s">
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M11.99 5V1l-5 5 5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6h-2c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8zm-1.1 11h-.85v-3.26l-1.01.31v-.69l1.77-.63h.09V16zm4.28-1.76c0 .32-.03.6-.1.82s-.17.42-.29.57-.28.26-.45.33-.37.1-.59.10-.41-.03-.59-.1-.33-.18-.46-.33-.23-.34-.3-.57-.11-.5-.11-.82v-.74c0-.32.03-.6.1-.82s.17-.42.29-.57.28-.26.45-.33.37-.1.59-.10.41.03.59.1.33.18.46.33.23.34.3.57.11.5.11.82v.74zm-.85-.86c0-.19-.01-.35-.04-.48s-.07-.23-.12-.31-.11-.14-.19-.17-.16-.05-.25-.05-.18.02-.25.05-.14.09-.19.17-.09.18-.12.31-.04.29-.04.48v.97c0 .19.01.35.04.48s.07.24.12.32.11.14.19.17.16.05.25.05.18-.02.25-.05.14-.09.19-.17.09-.19.12-.32.04-.29.04-.48v-.97z"/>
                                                </svg>
                                                <span class="skipLabel">10</span>
                                            </button>

                                            <button class="controlBtn controlBtn--primary" id="playBtn" title="Play/Pause">
                                                <span class="playIcon">
                                                    <svg viewBox="0 0 24 24" fill="currentColor">
                                                        <path d="M8 5v14l11-7z"/>
                                                    </svg>
                                                </span>
                                                <span class="pauseIcon">
                                                    <svg viewBox="0 0 24 24" fill="currentColor">
                                                        <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
                                                    </svg>
                                                </span>
                                            </button>

                                            <button class="controlBtn controlBtn--forward" id="forwardBtn" title="Forward 10s">
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M18 13c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6v4l5-5-5-5v4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8h-2zm-7.46 2.22v-.68l-1.01-.31v3.26h.85v-2.11l1.01.31v.69l-1.77.63h-.09zM13 14.25c0 .32.03.6.1.82s.17.42.29.57.28.26.45.33.37.1.59.1.41-.03.59-.1.33-.18.46-.33.23-.34.3-.57.11-.5.11-.82v-.74c0-.32-.03-.6-.1-.82s-.17-.42-.29-.57-.28-.26-.45-.33-.37-.1-.59-.1-.41.03-.59.1-.33.18-.46.33-.23.34-.3.57-.11.5-.11.82v.74zm.85-.86v-.97c0-.19.01-.35.04-.48s.07-.23.12-.31.11-.14.19-.17.16-.05.25-.05.18.02.25.05.14.09.19.17.09.18.12.31.04.29.04.48v.97c0 .19-.01.35-.04.48s-.07.24-.12.32-.11.14-.19.17-.16.05-.25.05-.18-.02-.25-.05-.14-.09-.19-.17-.09-.19-.12-.32-.04-.29-.04-.48z"/>
                                                </svg>
                                                <span class="skipLabel">10</span>
                                            </button>

                                            <button class="controlBtn controlBtn--secondary" id="nextBtn" title="Next">
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/>
                                                </svg>
                                            </button>
                                        </div>

                                        <!-- Secondary Actions Bar -->
                                        <div class="actionsBar">
                                            <button class="actionBtn" id="queueBtn" title="View Queue">
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"/>
                                                </svg>
                                            </button>

                                            <button class="actionBtn" id="shareBtn" title="Share">
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
                                                </svg>
                                            </button>

                                            <button class="actionBtn" id="moreBtn" title="More Options">
                                                <svg viewBox="0 0 24 24" fill="currentColor">
                                                    <path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Queue Tab -->
                                <div class="tabContent" data-tab="queue">
                                    <div class="listHeader">
                                        <h3 class="listTitle">Up Next</h3>
                                        <span class="listCount" id="queue-count-display">0 songs</span>
                                    </div>
                                    <ul id="queueList" class="modernList">
                                        <div class="empty">
                                            <div class="emptyIcon">
                                                <svg fill="currentColor" viewBox="0 0 24 24">
                                                    <path d="M15 6H3v2h12V6zm0 4H3v2h12v-2zM3 16h8v-2H3v2zM17 6v8.18c-.31-.11-.65-.18-1-.18-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3V8h3V6h-5z"/>
                                                </svg>
                                            </div>
                                            <div class="emptyText">Queue is empty</div>
                                            <div class="emptySubtext">Songs you add will appear here</div>
                                        </div>
                                    </ul>
                                </div>

                                <!-- Recent Tab -->
                                <div class="tabContent" data-tab="recent">
                                    <div class="listHeader">
                                        <h3 class="listTitle">Recently Played</h3>
                                        <span class="listCount" id="recent-count-display">0 songs</span>
                                    </div>
                                    <ul id="recentList" class="modernList">
                                        <div class="empty">
                                            <div class="emptyIcon">
                                                <svg fill="currentColor" viewBox="0 0 24 24">
                                                    <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>
                                                </svg>
                                            </div>
                                            <div class="emptyText">No recently played songs</div>
                                            <div class="emptySubtext">Start playing music to see your history</div>
                                        </div>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <canvas id="reactionCanvas"></canvas>
</aside>
<!-- Main Content Area -->
<div id="mainArea">
    <main id="main-container" class="content-container max-w-6xl mx-auto pb-24">
        <div id="contentWrapper" class="relative">

            <nav aria-label="Breadcrumb" class="breadcrumb-wrapper breadcrumb-fade-in">
                <ol class="breadcrumb-list">
                    <li class="breadcrumb-item">
                        <a href="#" class="breadcrumb-link">
                            <svg class="breadcrumb-home-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                            </svg>
                            <span>Dashboard</span>
                        </a>
                    </li>

                    <li class="breadcrumb-chevron">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </li>

                    <li class="breadcrumb-item">
                        <a href="#" class="breadcrumb-link">
                            <span>Projects</span>
                        </a>
                    </li>

                    <li class="breadcrumb-chevron">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </li>

                    <li class="breadcrumb-item">
                        <a href="#" class="breadcrumb-link">
                            <span>Web Development</span>
                        </a>
                    </li>

                    <li class="breadcrumb-chevron">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
                        </svg>
    </li>

                    <li class="breadcrumb-item active" aria-current="page">
                        <span class="breadcrumb-link">
                            <span>E-Commerce Platform</span>
                        </span>
                    </li>
                </ol>
            </nav>

            <div id="dynamic-content">
                <div id="featured-artists" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 md:gap-8 px-4"></div>
            </div>
            
        </div>
    </main>
</div>

<!--------   O V E R LA Y S   -------------------->
<!-- Popover Portal -->
<div id="popover-portal" class="popover-portal">
<!-- PopOvers Injected Here -->
</div>

<!-- PWA Install Banner -->
<div id="pwa-install-banner" class="fixed bottom-0 end-0 z-60 sm:max-w-sm w-full mx-auto p-6 opacity-0 pointer-events-none transition-all duration-300">
    <div class="p-4 bg-white border border-gray-200 rounded-xl shadow-2xs dark:bg-neutral-900 dark:border-neutral-800 flex gap-x-4">
        <svg class="shrink-0 w-8 h-auto" width="72" height="63" viewBox="0 0 72 63" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M15.5174 56.1528C16.2903 57.6825 16.929 61.4559 14.8118 60.9459C13.5013 60.5381 11.4445 57.6213 12.493 56.1528C12.661 55.8468 13.2189 55.2757 14.106 55.4389" stroke="currentColor" class="dark:stroke-neutral-200" stroke-width="2" stroke-linecap="round"/>
            <path d="M15.5173 49.6263L14.0262 48.5579C13.5346 48.2056 12.8477 48.3707 12.658 48.945C12.3456 49.8907 12.1258 51.1463 12.462 52.2324C12.5336 52.4636 12.7127 52.6466 12.9449 52.7146C13.8342 52.9751 15.2568 52.9048 15.8197 51.054" stroke="currentColor" class="dark:stroke-neutral-200" stroke-width="2" stroke-linecap="round"/>
            <ellipse cx="51.2061" cy="22.3973" rx="3.02446" ry="3.05945" fill="currentColor" class="text-gray-800 dark:fill-neutral-200"/>
        </svg>
        <div class="grow">
            <p class="text-sm text-gray-800 dark:text-neutral-200">
                Open in the app, or 
                <a id="pwa-download-link" class="inline-flex items-center gap-x-1.5 text-blue-600 decoration-2 hover:underline font-medium dark:text-blue-500" href="#">
                    Install App
                </a>
            </p>
        </div>
        <div>
            <button id="pwa-dismiss" type="button" class="p-2 inline-flex items-center gap-x-2 text-sm font-semibold rounded-full border border-transparent text-gray-500 hover:bg-gray-50 focus:outline-hidden focus:bg-gray-50 dark:text-neutral-400 dark:hover:bg-neutral-700 dark:focus:bg-neutral-700">
                <span class="sr-only">Dismiss</span>
                <svg class="shrink-0 size-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>
            </button>
        </div>
    </div>
</div>

<!-- Search Modal -->
<div id="searchModal" class="search-modal-overlay hidden fixed inset-0 z-[9999] opacity-0 transition-opacity duration-300">
    <!-- Backdrop with blur -->
    <div class="search-backdrop absolute inset-0 bg-black/60 backdrop-blur-xl"></div>
    
    <!-- Search Container -->
    <div class="search-container relative flex items-start justify-center min-h-screen p-4 pt-[15vh]">
        <div class="search-content w-full max-w-3xl transform scale-95 opacity-0 transition-all duration-300">
            
            <!-- Search Input Area -->
            <div class="search-input-wrapper relative bg-gradient-to-br from-gray-900/95 to-gray-800/95 backdrop-blur-2xl rounded-2xl shadow-2xl border border-white/10 overflow-hidden">
                
                <!-- Search Bar -->
                <div class="flex items-center gap-4 px-6 py-5 border-b border-white/10">
                    <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    
                    <input 
                        type="text" 
                        id="searchInput" 
                        placeholder="Search songs, artists, albums..." 
                        class="flex-1 bg-transparent text-white text-lg placeholder-gray-400 outline-none"
                        autocomplete="off"
                        spellcheck="false"
                    />
                    
                    <!-- Clear Button -->
                    <button id="clearSearch" class="clear-btn hidden text-gray-400 hover:text-white transition-colors p-2 rounded-full hover:bg-white/10">
                        <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                        </svg>
                    </button>
                    
                    <!-- Close Button -->
                    <button id="closeSearch" class="text-gray-400 hover:text-white transition-colors">
                        <span class="text-sm font-medium">ESC</span>
                    </button>
                </div>
                
                <!-- Search Results / Content Area -->
                <div id="searchResults" class="search-results max-h-[60vh] overflow-y-auto custom-scrollbar">
                    
                    <!-- Recent Searches (Default View) -->
                    <div id="recentSearches" class="recent-searches p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider">Recent Searches</h3>
                            <button id="clearRecentBtn" class="text-xs text-gray-500 hover:text-white transition-colors">Clear All</button>
                        </div>
                        
                        <div id="recentSearchList" class="space-y-2">
                            <!-- Recent search items will be inserted here -->
                        </div>
                        
                        <div id="recentSearchesEmpty" class="hidden text-center py-12 text-gray-500">
                            <svg class="w-16 h-16 mx-auto mb-4 opacity-30" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                            </svg>
                            <p>No recent searches</p>
                            <p class="text-sm mt-2">Start searching to see your history</p>
                        </div>
                    </div>
                    
                    <!-- Search Results Content -->
                    <div id="searchResultsContent" class="hidden">
                        <!-- Categories -->
                        <div id="songsResults" class="search-category hidden">
                            <div class="px-6 py-4 border-b border-white/5">
                                <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider">Songs</h3>
                            </div>
                            <div id="songsList" class="divide-y divide-white/5"></div>
                        </div>
                        
                        <div id="artistsResults" class="search-category hidden">
                            <div class="px-6 py-4 border-b border-white/5">
                                <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider">Artists</h3>
                            </div>
                            <div id="artistsList" class="divide-y divide-white/5"></div>
                        </div>
                        
                        <div id="albumsResults" class="search-category hidden">
                            <div class="px-6 py-4 border-b border-white/5">
                                <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider">Albums</h3>
                            </div>
                            <div id="albumsList" class="grid grid-cols-2 gap-4 p-6"></div>
                        </div>
                        
                        <!-- No Results -->
                        <div id="noResults" class="hidden text-center py-16 px-6">
                            <svg class="w-20 h-20 mx-auto mb-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <h3 class="text-xl font-semibold text-gray-300 mb-2">No results found</h3>
                            <p class="text-gray-500">Try adjusting your search terms</p>
                        </div>
                    </div>
                    
                    <!-- Loading State -->
                    <div id="searchLoading" class="hidden py-16 text-center">
                        <div class="inline-block animate-spin rounded-full h-12 w-12 border-4 border-gray-700 border-t-accent-primary"></div>
                    </div>
                    
                </div>
                
                <!-- Quick Filters (Optional) -->
                <div class="px-6 py-3 border-t border-white/10 bg-black/20 flex gap-2 overflow-x-auto custom-scrollbar">
                    <button class="filter-chip active" data-filter="all">All</button>
                    <button class="filter-chip" data-filter="songs">Songs</button>
                    <button class="filter-chip" data-filter="artists">Artists</button>
                    <button class="filter-chip" data-filter="albums">Albums</button>
                </div>
                
            </div>
            
            <!-- Search Tips -->
            <div class="mt-4 px-4 text-center text-xs text-gray-500">
                <span class="inline-flex items-center gap-4">
                    <span>↑↓ to navigate</span>
                    <span>↵ to select</span>
                    <span>ESC to close</span>
                </span>
            </div>
            
        </div>
    </div>
</div>

</div><!-- W R A P P E R -->

<!-- L I B R A R I E S -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/preline@2.0.3/dist/preline.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tippy.js@6.3.7/dist/tippy.umd.min.js"></script>

<!-- Refactored JavaScript Modules (New 6-file structure) -->
<!-- Music Library -->
<script type="module" src="./content/library.js"></script>

<!-- Core Modules -->
<script type="module" src="./javaScripts/map.js"></script>
<script type="module" src="./javaScripts/helpers.js"></script>
<script type="module" src="./javaScripts/search.js"></script>
<script type="module" src="./javaScripts/templates.js"></script>
<script type="module" src="./javaScripts/misc.js"></script>
<script type="module" src="./javaScripts/main.js"></script>

<!-- Legacy modules (still needed - keep parsers.js) -->
<script type="module" src="./javaScripts/utilities/parsers.js"></script>

<!-- Page-related modules (will be migrated to misc.js later) -->
<script type="module" src="./javaScripts/pages/statics.js"></script>
<script type="module" src="./javaScripts/pages/rendering.js"></script>
<script type="module" src="./javaScripts/pages/updates.js"></script>
<script type="module" src="./javaScripts/pages/router.js"></script>

<!-- Unified Player Controller Script (Initialization) -->
<script>
document.addEventListener('DOMContentLoaded', () => {
    // Unified menu triggers (works for both mobile navbar and desktop/tablet triggers)
    const mobileMenuTrigger = document.getElementById('menu-trigger');
    const unifiedMenuTrigger = document.getElementById('unified-menu-trigger');
    const dropdownMenu = document.getElementById('dropdown-menu');
    const dropdownClose = document.getElementById('dropdown-close');
    
    // Menu trigger handlers
    function toggleMenu() {
        dropdownMenu.classList.toggle('show');
    }
    
    function closeMenu() {
        dropdownMenu.classList.remove('show');
    }
    
    // Bind mobile menu trigger
    if (mobileMenuTrigger && dropdownMenu) {
        mobileMenuTrigger.addEventListener('click', toggleMenu);
    }
    
    // Bind unified menu trigger (desktop/tablet)
    if (unifiedMenuTrigger && dropdownMenu) {
        unifiedMenuTrigger.addEventListener('click', toggleMenu);
    }
    
    // Close button
    if (dropdownClose && dropdownMenu) {
        dropdownClose.addEventListener('click', closeMenu);
    }
    
    // Close on clicking outside
    if (dropdownMenu) {
        dropdownMenu.addEventListener('click', (e) => {
            if (e.target === dropdownMenu) {
                closeMenu();
            }
        });
    }
    
    // Unified player triggers
    const mobilePlayerTrigger = document.getElementById('now-playing-area');
    const unifiedPlayerTrigger = document.getElementById('unified-player-trigger');
    const drawer = document.getElementById('drawer');
    
    function togglePlayer() {
        if (drawer) {
            if (drawer.matches(':popover-open')) {
                drawer.hidePopover();
            } else {
                drawer.showPopover();
            }
        }
    }
    
    // Bind mobile player trigger (navbar center)
    if (mobilePlayerTrigger) {
        mobilePlayerTrigger.addEventListener('click', togglePlayer);
    }
    
    // Bind unified player trigger (desktop/tablet)
    if (unifiedPlayerTrigger) {
        unifiedPlayerTrigger.addEventListener('click', togglePlayer);
    }
});
</script>

<!-- Global Initialize -->
<script type="module">
    import { music } from './content/library.js';
    import { app } from './javaScripts/main.js';
    
    window.music = music;
    
    document.addEventListener('DOMContentLoaded', async () => {
        console.log('📄 DOMContentLoaded - Starting app...');
        await app.initialize();
    });
</script>

<!-- Debug Console (Optional - remove in production) -->
<script src="https://cdn.jsdelivr.net/npm/eruda"></script>
<script>
eruda.init();
</script>

</body>
</html>
